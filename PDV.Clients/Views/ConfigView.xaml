<ui:FluentWindow
    x:Class="PDV.Clients.Views.ConfigView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="Configurações do Sistema"
    Width="1200"
    Height="800"
    MinWidth="900"
    MinHeight="600"
    ExtendsContentIntoTitleBar="True"
    WindowBackdropType="Mica"
    WindowStartupLocation="CenterScreen"
    WindowState="Maximized"
    mc:Ignorable="d">

    <Grid Margin="32">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0,0,0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                <ui:Button
                    Margin="0,0,12,0"
                    Padding="12,8"
                    Appearance="Secondary"
                    Command="{Binding BackCommand}"
                    Icon="{ui:SymbolIcon ArrowLeft24}"
                    ToolTip="Voltar" />
                <ui:SymbolIcon
                    Margin="0,0,12,0"
                    FontSize="32"
                    Symbol="Settings24" />
                <TextBlock
                    FontSize="28"
                    FontWeight="SemiBold"
                    Text="Configurações" />
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <ui:Button
                    Padding="12,8"
                    Appearance="Primary"
                    Command="{Binding SaveConfigCommand}"
                    Icon="{ui:SymbolIcon Save24}">
                    <TextBlock Text="Salvar Alterações" />
                </ui:Button>
            </StackPanel>
        </Grid>

        <TextBlock
            Grid.Row="1"
            Margin="0,0,0,16"
            HorizontalAlignment="Right"
            FontSize="14"
            FontWeight="Medium"
            Foreground="#FF5555"
            Text="{Binding ErrorMessage}"
            TextWrapping="Wrap">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Setter Property="Visibility" Value="Visible" />
                    <Style.Triggers>
                        <Trigger Property="Text" Value="{x:Null}">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </Trigger>
                        <Trigger Property="Text" Value="">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>

        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
            <ui:Card
                Padding="24"
                VerticalAlignment="Top"
                VerticalContentAlignment="Top">

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="48" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <StackPanel
                        Grid.Column="0"
                        MaxWidth="800"
                        HorizontalAlignment="Stretch">

                        <TextBlock
                            Margin="0,0,0,20"
                            FontSize="20"
                            FontWeight="SemiBold"
                            Text="Dados do Estabelecimento" />

                        <TextBlock
                            Margin="0,0,0,8"
                            FontWeight="SemiBold"
                            Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                            Text="Nome Fantasia *" />
                        <ui:TextBox Margin="0,0,0,16" Text="{Binding StoreName, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBlock
                            Margin="0,0,0,8"
                            FontWeight="SemiBold"
                            Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                            Text="CNPJ" />
                        <ui:TextBox Margin="0,0,0,16" Text="{Binding Cnpj, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBlock
                            Margin="0,0,0,8"
                            FontWeight="SemiBold"
                            Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                            Text="Endereço Completo" />
                        <ui:TextBox Margin="0,0,0,16" Text="{Binding Address, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBlock
                            Margin="0,0,0,8"
                            FontWeight="SemiBold"
                            Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                            Text="Impressora Padrão" />
                        <ui:TextBox
                            Margin="0,0,0,16"
                            PlaceholderText="Ex: EPSON TM-T20"
                            Text="{Binding PrinterName, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>

                    <StackPanel Grid.Column="2" VerticalAlignment="Top">

                        <TextBlock
                            Margin="0,0,0,20"
                            FontSize="20"
                            FontWeight="SemiBold"
                            Text="Identidade Visual" />

                        <ui:Card
                            Padding="0"
                            BorderBrush="{DynamicResource ControlElevationBorderBrush}"
                            BorderThickness="1">
                            <Grid
                                Width="250"
                                Height="250"
                                Background="{DynamicResource ControlFillColorSecondaryBrush}">

                                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <StackPanel.Style>
                                        <Style TargetType="StackPanel">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding LogoDisplay}" Value="{x:Null}">
                                                    <Setter Property="Visibility" Value="Visible" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </StackPanel.Style>
                                    <ui:SymbolIcon
                                        FontSize="48"
                                        Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                                        Symbol="ImageOff24" />
                                    <TextBlock
                                        Margin="0,10,0,0"
                                        HorizontalAlignment="Center"
                                        Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                                        Text="Sem Logo" />
                                </StackPanel>

                                <Image Source="{Binding LogoDisplay}" Stretch="Uniform" />
                            </Grid>
                        </ui:Card>

                        <ui:Button
                            Margin="0,16,0,0"
                            HorizontalAlignment="Stretch"
                            Appearance="Secondary"
                            Command="{Binding SelectLogoCommand}"
                            Icon="{ui:SymbolIcon ImageEdit24}">
                            <TextBlock Text="Alterar Logotipo" />
                        </ui:Button>

                        <TextBlock
                            Margin="0,8,0,0"
                            HorizontalAlignment="Center"
                            FontSize="12"
                            Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                            Text="Recomendado: 500x500px (PNG/JPG)" />
                    </StackPanel>
                </Grid>
            </ui:Card>
        </ScrollViewer>
    </Grid>
</ui:FluentWindow>